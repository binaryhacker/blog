<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <base href="/">
    

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400|Old+Standard+TT:400' rel='stylesheet' type='text/css'>

    <link rel="icon" type="image/png" href="/favicon_16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/favicon_32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon_128x128.png" sizes="128x128">

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
  (adsbygoogle = window.adsbygoogle || []).push({
		      google_ad_client: "ca-pub-6116030345332846",
		          enable_page_level_ads: true
			    });
    </script>
    <title>
      
      
         C Program Without Main Function 
      
    </title>
    <link rel="canonical" href="/post/c-compilation-stages/">

    <style>
  * {
    border:0;
    font:inherit;
    font-size:100%;
    vertical-align:baseline;
    margin:0;
    padding:0;
    color: black;
  }

  body {
    font-family:'Open Sans', 'Myriad Pro', Myriad, sans-serif;
    font-size:17px;
    line-height:160%;
    color:#1d1313;
    max-width:700px;
    margin:auto;
  }

  p {
    margin: 20px 0;
  }

  a img {
    border:none;
  }

  img {
    margin: 10px auto 10px auto;
    max-width: 100%;
    display: block;
  }

  pre, code {
    font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
    background-color: #f7f7f7;
  }

  code {
    font-size: 12px;
    padding: 4px;
  }

  pre {
    margin-top: 0;
    margin-bottom: 16px;
    word-wrap: normal;
    padding: 16px;
    overflow: auto;
    font-size: 85%;
    line-height: 1.45;
  }

  pre>code {
    padding: 0;
    margin: 0;
    font-size: 100%;
    word-break: normal;
    white-space: pre;
    background: transparent;
    border: 0;
  }

  pre code {
    display: inline;
    max-width: auto;
    padding: 0;
    margin: 0;
    overflow: visible;
    line-height: inherit;
    word-wrap: normal;
    background-color: transparent;
    border: 0;
  }

  pre code::before,
  pre code::after {
    content: normal;
  }

  em,q,em,dfn {
    font-style:italic;
  }

  .sans,html .gist .gist-file .gist-meta {
    font-family:"Open Sans","Myriad Pro",Myriad,sans-serif;
  }

  .mono,pre,code,tt,p code,li code {
    font-family:Menlo,Monaco,"Andale Mono","lucida console","Courier New",monospace;
  }

  .heading,.serif,h1,h2,h3 {
    font-family:"Old Standard TT",serif;
  }

  strong {
    font-weight:600;
  }

  q:before {
    content:"\201C";
  }

  q:after {
    content:"\201D";
  }

  del,s {
    text-decoration:line-through;
  }

  blockquote {
    font-family:"Old Standard TT",serif;
    text-align:center;
    padding:50px;
  }

  blockquote p {
    display:inline-block;
    font-style:italic;
  }

  blockquote:before,blockquote:after {
    font-family:"Old Standard TT",serif;
    content:'\201C';
    font-size:35px;
    color:#403c3b;
  }

  blockquote:after {
    content:'\201D';
  }

  hr {
    width:40%;
    height: 1px;
    background:#403c3b;
    margin: 25px auto;
  }

  h1 {
    font-size:35px;
  }

  h2 {
    font-size:28px;
  }

  h3 {
    font-size:22px;
    margin-top:18px;
  }

  h1 a,h2 a,h3 a {
    text-decoration:none;
  }

  h1,h2 {
    margin-top:28px;
  }

  #sub-header, time {
    color:#403c3b;
    font-size:13px;
  }

  #sub-header {
    margin: 0 4px;
  }

  #nav h1 a {
    font-size:35px;
    color:#1d1313;
    line-height:120%;
  }

  .posts_listing a,#nav a {
    text-decoration: none;
  }

  li {
    margin-left: 20px;
  }

  ul li {
    margin-left: 5px;
  }

  ul li {
    list-style-type: none;
  }
  ul li:before {
    content:"\00BB \0020";
  }

  #nav ul li:before, .posts_listing li:before {
    content:'';
    margin-right:0;
  }

  #content {
    text-align:left;
    width:100%;
    font-size:15px;
    padding:60px 0 80px;
  }

  #content h1,#content h2 {
    margin-bottom:5px;
  }

  #content h2 {
    font-size:25px;
  }

  #content .entry-content {
    margin-top:15px;
  }

  #content time {
    margin-left:3px;
  }

  #content h1 {
    font-size:30px;
  }

  .highlight {
    margin: 10px 0;
  }

  .posts_listing {
    margin:0 0 50px;
  }

  .posts_listing li {
    margin:0 0 25px 15px;
  }

  .posts_listing li a:hover,#nav a:hover {
    text-decoration: underline;
  }

  #nav {
    text-align:center;
    position:static;
    margin-top:60px;
  }

  #nav ul {
    display: table;
    margin: 8px auto 0 auto;
  }

  #nav li {
    list-style-type:none;
    display:table-cell;
    font-size:15px;
    padding: 0 20px;
  }

  #links {
    margin: 50px 0 0 0;
  }

  #links :nth-child(2) {
    float:right;
  }

  #not-found {
    text-align: center;
  }

  #not-found a {
    font-family:"Old Standard TT",serif;
    font-size: 200px;
    text-decoration: none;
    display: inline-block;
    padding-top: 225px;
  }

  @media (max-width: 750px) {
    body {
      padding-left:20px;
      padding-right:20px;
    }

    #nav h1 a {
      font-size:28px;
    }

    #nav li {
      font-size:13px;
      padding: 0 15px;
    }

    #content {
      margin-top:0;
      padding-top:50px;
      font-size:14px;
    }

    #content h1 {
      font-size:25px;
    }

    #content h2 {
      font-size:22px;
    }

    .posts_listing li div {
      font-size:12px;
    }
  }

  @media (max-width: 400px) {
    body {
      padding-left:20px;
      padding-right:20px;
    }

    #nav h1 a {
      font-size:22px;
    }

    #nav li {
      font-size:12px;
      padding: 0 10px;
    }

    #content {
      margin-top:0;
      padding-top:20px;
      font-size:12px;
    }

    #content h1 {
      font-size:20px;
    }

    #content h2 {
      font-size:18px;
    }

    .posts_listing li div{
      font-size:12px;
    }
  }
</style>


    
  </head>

  <body>
    <section id=nav>
      <h1><a href="/">BinaryHacker Blog</a></h1>
      <ul>
        
          <li><a href="http://binaryhacker.net/profile/about/">About</a></li>
        
      </ul>
    </section>


<section id=content>
  <h1> C Program Without Main Function </h1>

  <div id=sub-header>
    May 2017 · 9 minute read
  </div>

  <div class="entry-content">
    

<p>Let us see how we can write a c program without main as a <code>function</code> . To achieve this we need to understand how a C compiler compiles the C code . The compiler will pass through different stages while compiling the code to a binary format (<code>elf</code>).</p>

<h1 id="c-compilation-stages">C compilation stages</h1>

<p>While compiling a c program the compiler goes through different stages . The stages of the compiler are listed below .</p>

<ol>
<li>Preprocessing</li>
<li>Compilation Proper</li>
<li>Assembling</li>
<li>Linking</li>
</ol>

<p>Now let us see the different stages of compilation in detail with the help of the following code snippet .</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span style="font-style: italic">#define ONE 1</span>
<span style="font-weight: bold">int</span> main()
{
	printf(<span style="font-style: italic">&quot;%d</span><span style="font-weight: bold; font-style: italic">\n</span><span style="font-style: italic">&quot;</span>,ONE);
}
</pre></div>

<h2 id="preprocessing">Preprocessing</h2>

<p>During preprocessing stage the compiler will use the c preprocessor <code>cpp</code>  to  evaluate the preprocessor commands . The preprocessor commands  are usually preappended by a <code>#</code> charector .</p>

<p>The following are the list of preprocessor commands.</p>

<table>
<thead>
<tr>
<th><strong>Command</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td>#define</td>
<td>Substitutes a preprocessor macro.</td>
</tr>

<tr>
<td>#include</td>
<td>Inserts a particular header from another file.</td>
</tr>

<tr>
<td>#undef</td>
<td>Undefines a preprocessor macro.</td>
</tr>

<tr>
<td>#ifdef</td>
<td>Returns true if this macro is defined.</td>
</tr>

<tr>
<td>#ifndef</td>
<td>Returns true if this macro is not defined.</td>
</tr>

<tr>
<td>#if</td>
<td>Tests if a compile time condition is true.</td>
</tr>

<tr>
<td>#else</td>
<td>The alternative for #if.</td>
</tr>

<tr>
<td>#elif</td>
<td>#else and #if in one statement.</td>
</tr>

<tr>
<td>#endif</td>
<td>Ends preprocessor conditional.</td>
</tr>

<tr>
<td>#error</td>
<td>Prints error message on stderr.</td>
</tr>

<tr>
<td>#pragma</td>
<td>Issues special commands to the compiler, using a standardized method.</td>
</tr>
</tbody>
</table>

<p>To do the preprocessing alone we can invoke the cpp command .</p>

<p><strong>NOTE</strong>:
<code>tony@terra-&gt;</code> is the command prompt</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">tony@terra-&gt; cpp -E main.c -o main.i
</pre></div>

<p>By executing the above command we will get main.i as output . In the output of the preprocessing you can notice that the Preprocessor macro defanition <code>ONE</code> got replaced by <code>1</code></p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">tony@terra-&gt; cat main.i 
<span style="font-style: italic"># 1 &quot;main.c&quot;</span>
<span style="font-style: italic"># 1 &quot;&lt;built-in&gt;&quot;</span>
<span style="font-style: italic"># 1 &quot;&lt;command-line&gt;&quot;</span>
<span style="font-style: italic"># 1 &quot;/usr/include/stdc-predef.h&quot; 1 3 4</span>
<span style="font-style: italic"># 1 &quot;&lt;command-line&gt;&quot; 2</span>
<span style="font-style: italic"># 1 &quot;main.c&quot;</span>

int main()
{
	 printf(<span style="font-style: italic">&quot;%d\n&quot;</span>,1);
}
</pre></div>

<h2 id="compiling">Compiling</h2>

<p>The next stage in the compilation process is called the compilation proper . During this stage the comiler will read the preprocessor output and translate it into the assebly code . In case of gcc the assembly code generated will be in AT and T syntax .</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">tony@terra-&gt; gcc -S main.i 
main.c: In <span style="font-weight: bold">function</span> ‘main’:
main.c:4:2: warning: incompatible implicit declaration of built-in <span style="font-weight: bold">function</span> ‘printf’ [enabled by default]
printf(<span style="font-style: italic">&quot;%d\n&quot;</span>,ONE);
^
tony@terra-&gt; cat main.s 
.file	<span style="font-style: italic">&quot;main.c&quot;</span>
.section	.rodata
.LC0:
.string	<span style="font-style: italic">&quot;%d\n&quot;</span>
.text
.globl	main
.type	main, @function
main:
.LFB0:
.cfi_startproc
pushq	%rbp
.cfi_def_cfa_offset 16
.cfi_offset 6, -16
movq	%rsp, %rbp
.cfi_def_cfa_register 6
movl	$1, %esi
movl	$.LC0, %edi
movl	$0, %eax
call	printf
popq	%rbp
.cfi_def_cfa 7, 8
ret
.cfi_endproc
.LFE0:
.size	main, .-main
.ident	<span style="font-style: italic">&quot;GCC: (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4&quot;</span>
.section	.note.GNU-stack,<span style="font-style: italic">&quot;&quot;</span>,@progbits
</pre></div>

<h2 id="assembling">Assembling</h2>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">tony@terra-&gt; as main.s -o main.o
</pre></div>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">tony@terra-&gt; objdump -D main.o 

main.o:     file format elf64-x86-64


Disassembly of section .text:

0000000000000000 &lt;.text&gt;:
0:	55                   	push   %rbp
1:	48 89 e5             	mov    %rsp,%rbp
4:	be 01 00 00 00       	mov    $0x1,%esi
9:	bf 00 00 00 00       	mov    $0x0,%edi
e:	b8 00 00 00 00       	mov    $0x0,%eax
13:	e8 00 00 00 00       	callq  0x18
18:	5d                   	pop    %rbp
19:	c3                   	retq   

Disassembly of section .rodata:

0000000000000000 &lt;.rodata&gt;:
0:	25                   	.byte 0x25
1:	64 0a 00             	or     %fs:(%rax),%al

Disassembly of section .comment:

0000000000000000 &lt;.comment&gt;:
0:	00 47 43             	add    %al,0x43(%rdi)
3:	43 3a 20             	rex.XB cmp (%r8),%spl
6:	28 55 62             	sub    %dl,0x62(%rbp)
9:	75 6e                	jne    0x79
b:	74 75                	je     0x82
d:	20 34 2e             	and    %dh,(%rsi,%rbp,1)
10:	38 2e                	cmp    %ch,(%rsi)
12:	34 2d                	xor    $0x2d,%al
14:	32 75 62             	xor    0x62(%rbp),%dh
17:	75 6e                	jne    0x87
19:	74 75                	je     0x90
1b:	31 7e 31             	xor    %edi,0x31(%rsi)
1e:	34 2e                	xor    $0x2e,%al
20:	30 34 2e             	xor    %dh,(%rsi,%rbp,1)
23:	33 29                	xor    (%rcx),%ebp
25:	20 34 2e             	and    %dh,(%rsi,%rbp,1)
28:	38 2e                	cmp    %ch,(%rsi)
2a:	34 00                	xor    $0x0,%al

Disassembly of section .eh_frame:

0000000000000000 &lt;.eh_frame&gt;:
0:	14 00                	adc    $0x0,%al
2:	00 00                	add    %al,(%rax)
4:	00 00                	add    %al,(%rax)
6:	00 00                	add    %al,(%rax)
8:	01 7a 52             	add    %edi,0x52(%rdx)
b:	00 01                	add    %al,(%rcx)
d:	78 10                	js     0x1f
f:	01 1b                	add    %ebx,(%rbx)
11:	0c 07                	or     $0x7,%al
13:	08 90 01 00 00 1c    	or     %dl,0x1c000001(%rax)
19:	00 00                	add    %al,(%rax)
1b:	00 1c 00             	add    %bl,(%rax,%rax,1)
1e:	00 00                	add    %al,(%rax)
20:	00 00                	add    %al,(%rax)
22:	00 00                	add    %al,(%rax)
24:	1a 00                	sbb    (%rax),%al
26:	00 00                	add    %al,(%rax)
28:	00 41 0e             	add    %al,0xe(%rcx)
2b:	10 86 02 43 0d 06    	adc    %al,0x60d4302(%rsi)
31:	55                   	push   %rbp
32:	0c 07                	or     $0x7,%al
34:	08 00                	or     %al,(%rax)
...
</pre></div>

<h2 id="linking">Linking</h2>

<p>Note that the linking order is importent the position of object files <code>.o</code> files is really importent here if you change the linking order the elf may not get executed properly</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">tony@terra-&gt; ld  /usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu/crt1.o /usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu/crti.o  /usr/lib/gcc/x86_64-linux-gnu/4.8/crtbegin.o  -lc -dynamic-linker /lib64/ld-linux-x86-64.so.2 main.o /usr/lib/gcc/x86_64-linux-gnu/4.8/crtend.o /usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu/crtn.o
tony@terra-&gt; ./a.out 
1
</pre></div>

<p>The job of the linker is is to resolve the unresolved symbols by linking multiple object files into one binary file . The binary file format in case of linux is elf (executable linkable format) . The default entry point of a program can be figured out from the elf header .</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">tony@terra-&gt; readelf -h a.out  
ELF Header:
Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00 
Class:                             ELF64
Data:                              2<span style="border: 1px solid #FF0000">&#39;</span>s complement, little endian
Version:                           1 (current)
OS/ABI:                            UNIX - System V
ABI Version:                       0
Type:                              EXEC (Executable file)
Machine:                           Advanced Micro Devices X86-64
Version:                           0x1
Entry point address:               0x400440
Start of program headers:          64 (bytes into file)
Start of section headers:          4472 (bytes into file)
Flags:                             0x0
Size of this header:               64 (bytes)
Size of program headers:           56 (bytes)
Number of program headers:         9
Size of section headers:           64 (bytes)
Number of section headers:         30
Section header string table index: 27
</pre></div>

<p>From the above listing you can see that the <code>entry point</code> of a randome elf binary is <code>0x4004400</code> . By using nm tool we can figure out the symbol who is having the address 0x4004400</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">tony@terra-&gt; nm a.out | grep <span style="font-style: italic">&quot;400440&quot;</span>
0000000000400440 T _start
</pre></div>

<p>So _start it the entry point . And main function is invoked from <code>_start</code> . The <code>_start</code> is defined in the object file <code>/usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu/crt1.o</code></p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">tony@terra-&gt; nm /usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu/crt1.o
0000000000000000 D __data_start
0000000000000000 W data_start
0000000000000000 R _IO_stdin_used
		 U __libc_csu_fini
		 U __libc_csu_init
		 U __libc_start_main
		 U main
0000000000000000 T _start
</pre></div>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span style="font-weight: bold">int</span> _start()
{
	printf(<span style="font-style: italic">&quot;hello world</span><span style="font-weight: bold; font-style: italic">\n</span><span style="font-style: italic">&quot;</span>);
	exit(0);
}
</pre></div>

<p>The following c program compiles properly .</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">main;
</pre></div>

<p>Lets see why .</p>

<p>First lets imagine what happens at the preprocessor stage . At preprocessor stage this program does&rsquo;nt include any other c programs or does&rsquo;nt have any macros for substitution . So the output of the preprocessor is same as the initial program itself . You can verify this by stopping the compiler at preprocessor stage with <code>-E</code> option in gcc</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">tony@terra-&gt; gcc -E main.c -o main.i
tony@terra-&gt; cat main.i 
<span style="font-style: italic"># 1 &quot;main.c&quot;</span>
<span style="font-style: italic"># 1 &quot;&lt;built-in&gt;&quot;</span>
<span style="font-style: italic"># 1 &quot;&lt;command-line&gt;&quot;</span>
<span style="font-style: italic"># 1 &quot;/usr/include/stdc-predef.h&quot; 1 3 4</span>
<span style="font-style: italic"># 1 &quot;&lt;command-line&gt;&quot; 2</span>
<span style="font-style: italic"># 1 &quot;main.c&quot;</span>
main;
</pre></div>

<p>During compilation proper state the c compiler reads the output of preprocessor and generates assembly code . This program does&rsquo;nt have any syntax error as a variable without any type will default to an int . So according to the compiler main is a global variable .</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">tony@terra-&gt; gcc -S main.i 
main.c:1:1: warning: data definition has no type or storage class [enabled by default]
 main;
  ^
tony@terra-&gt; cat main.s 
	.file	<span style="font-style: italic">&quot;main.c&quot;</span>
	.comm	main,4,4
	.ident	<span style="font-style: italic">&quot;GCC: (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4&quot;</span>
	.section	.note.GNU-stack,<span style="font-style: italic">&quot;&quot;</span>,@progbits
</pre></div>

<p>The <code>.comm pseudo-op</code> may be used to declare a common symbol, which is another form of uninitialized symbol.</p>

<pre><code>Syntax: .comm symbol, length 
	.comm declares a common symbol named symbol. When linking, a common symbol in one object file may be merged with a defined or common symbol of the same name in another object file. If ld does not see a definition for the symbol - just one or more common symbols - then it will allocate length bytes of uninitialized memory. length must be an absolute expression. If ld sees multiple common symbols with the same name, and they do not all have the same size, it will allocate space using the largest size.
	When using ELF, the .comm directive takes an optional third argument. This is the desired alignment of the symbol, specified as a byte boundary (for example, an alignment of 16 means that the least significant 4 bits of the address should be zero). The alignment must be an absolute expression, and it must be a power of two. If ld allocates uninitialized memory for the common symbol, it will use the alignment when placing the symbol. If no alignment is specified, as will set the alignment to the largest power of two less than or equal to the size of the symbol, up to a maximum of 16.
</code></pre>

<p>In the Assembling stage of the compilation assembler translates the assembly instructions / assembler directives to binary instructions and meta data for elf . In this case we don&rsquo;t have any any assembly instructions in main.s so it just creates the elf relocatable object with a proper symbol table and sections . You can see the 7th entry in the symbol table in the following listing for this.</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">tony@terra-&gt; as main.s -o main.o
tony@terra-&gt; readelf -s main.o 
Symbol table <span style="font-style: italic">&#39;.symtab&#39;</span> contains 8 entries:
Num:    Value          Size Type    Bind   Vis      Ndx Name
0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND 
1: 0000000000000000     0 FILE    LOCAL  DEFAULT  ABS main.c
2: 0000000000000000     0 SECTION LOCAL  DEFAULT    1 
3: 0000000000000000     0 SECTION LOCAL  DEFAULT    2 
4: 0000000000000000     0 SECTION LOCAL  DEFAULT    3 
5: 0000000000000000     0 SECTION LOCAL  DEFAULT    5 
6: 0000000000000000     0 SECTION LOCAL  DEFAULT    4 
7: 0000000000000004     4 OBJECT  GLOBAL DEFAULT  COM main
</pre></div>

<p>Now at linking stage it final elf is created . And since main is a global uninitialized variable it\&rsquo;s value will be zero and it will be allocated in .bss section .</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">tony@terra-&gt; ld  /usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu/crt1.o /usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu/crti.o  /usr/lib/gcc/x86_64-linux-gnu/4.8/crtbegin.o  -lc -dynamic-linker /lib64/ld-linux-x86-64.so.2 main.o /usr/lib/gcc/x86_64-linux-gnu/4.8/crtend.o /usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu/crtn.o

tony@terra-&gt; readelf -S a.out | grep <span style="font-style: italic">&quot;.bss&quot;</span> -n2
50-  [22] .data             PROGBITS         00000000006007c8  000007c8
51-       0000000000000010  0000000000000000  WA       0     0     8
52:  [23] .bss              NOBITS           00000000006007d8  000007d8
53-       0000000000000008  0000000000000000  WA       0     0     4
54-  [24] .comment          PROGBITS         0000000000000000  000007d8
</pre></div>

<h2 id="hello-world-without-main-as-function">Hello World without Main as Function</h2>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">main;
</pre></div>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">main __attribute__((section(<span style="font-style: italic">&quot;.text&quot;</span>))) = 0x90909090;

<span style="font-weight: bold">int</span> fun()
{
	        printf(<span style="font-style: italic">&quot;hello world</span><span style="font-weight: bold; font-style: italic">\n</span><span style="font-style: italic">&quot;</span>);
}
</pre></div>

  </div>

  <div id=links>
    
    
      <a class="basic-alignment left" href="/post/nexus_5_factory_flashing/">Flashing Nexus 5 Factory Images &raquo;</a>
    
  </div>
</section>

  
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-99635801-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

</body>
</html>



